---
title: 科学爱国
date: 2018-04-03 13:58:40
tags:
 - Docker
categories:
 - TechChatter
---

薅了一波阿里云的羊毛，3年香港服务器 2 折，用 Docker 简单搞了一下科学爱国。

<!--more-->

## Docker 安装

这一步参考 [Docker 文档](https://docs.docker.com/install/linux/docker-ce/ubuntu/) 就能搞定。命令如下

~~~bash
$ sudo apt-get update
$ sudo apt-get install apt-transport-https ca-certificates curl  software-properties-common
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
$ sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"
$ sudo apt-get update
$ sudo apt-get install docker-ce
~~~

## 开始爱国

[shadowsocks-libev](https://github.com/shadowsocks/shadowsocks-libev) 是 C 编写的轻量级 SOCKS5 代理，文档写的十分详细。有官方的 Docker 镜像，所以直接 pull 下来运行就好。

~~~bash
$ docker pull shadowsocks/shadowsocks-libev
~~~

再新建立一个 `docker-compose.yml` 文件如下，记得改密码。这个设置监听宿主机 28388 端口，并将其映射到 container 内部 8388 端口，科学爱国服务加密方式为 `aes-256-cfb`。

~~~yml
shadowsocks:
  image: shadowsocks/shadowsocks-libev
  ports:
    - "19652:8388/tcp"
    - "19652:8388/udp"
  environment:
    - METHOD=aes-256-cfb
    - PASSWORD=XXXXXXXX
  restart: always
~~~

现在可以直接使用 docker-compose 运行科学爱国服务了。

~~~bash
$ docker-compose up -d
~~~

阿里云的服务器有比较严格的端口控制，记得去安全组把端口打开，不然还是没办法科学爱国。

